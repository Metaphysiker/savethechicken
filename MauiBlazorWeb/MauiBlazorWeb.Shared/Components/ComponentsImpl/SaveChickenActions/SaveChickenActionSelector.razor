@using MauiBlazorWeb.Shared.Factories.FactoriesImpl
@inject GenericDtoServiceFactory DtoServiceFactory
@using MauiBlazorWeb.Web.Services.ServicesImpl
@using MudBlazor
@using global::Shared.Dtos.DtosImpl

<MudSelect T="int?" Label="Aktion auswÃ¤hlen" @bind-Value="SelectedActionId" Dense="true" Variant="Variant.Outlined" Clearable="true">
    @foreach (var action in actions)
    {
        <MudSelectItem Value="@((int?)action.Id)">#@action.Id: @action.Title</MudSelectItem>
    }
</MudSelect>

@code {
    [Parameter] public int? SelectedActionId { get; set; }
    [Parameter] public EventCallback<int?> SelectedActionIdChanged { get; set; }
    private GenericDtoService<SaveChickenActionDto, SaveChickenActionSearch>? _service;
    private List<SaveChickenActionDto> actions = new();

    protected override async Task OnInitializedAsync()
    {
        _service = DtoServiceFactory.Create<SaveChickenActionDto, SaveChickenActionSearch>();
        actions = await _service.GetAllAsync();
        StateHasChanged();
    }

    private async Task OnItemSelected(SaveChickenActionDto? item)
    {
        await SelectedActionIdChanged.InvokeAsync(item?.Id);
    }
}
